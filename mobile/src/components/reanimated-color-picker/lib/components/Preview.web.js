var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.Preview=Preview;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _ColorsConversionFormulas=require("../ColorsConversionFormulas");var _GlobalStyles=require("../GlobalStyles");var _this=this,_jsxFileName="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Preview.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var CONTRAST_RATIO_MIN=4.5;var ReText=function ReText(_ref){var text=_ref.text,style=_ref.style,hash=_ref.hash;var _useState=(0,_react.useState)(text()),_useState2=(0,_slicedToArray2.default)(_useState,2),color=_useState2[0],setColor=_useState2[1];var updateText=function updateText(_t){setColor(text());};(0,_reactNativeReanimated.useDerivedValue)(function(){var _f=function _f(){(0,_reactNativeReanimated.runOnJS)(updateText)(hash.value);};_f._closure={runOnJS:_reactNativeReanimated.runOnJS,updateText:updateText,hash:hash};_f.asString="function _f(){const{runOnJS,updateText,hash}=jsThis._closure;{runOnJS(updateText)(hash.value);}}";_f.__workletHash=6674564299545;_f.__location="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Preview.js (12:20)";return _f;}(),[hash.value]);var tStyle=Array.isArray(style)?style:[style];return _react.default.createElement(_reactNativeReanimated.default.Text,{style:[styles.previewText].concat((0,_toConsumableArray2.default)(tStyle)),__self:_this,__source:{fileName:_jsxFileName,lineNumber:16,columnNumber:12}},color);};function Preview(_ref2){var _getStyle;var _ref2$style=_ref2.style,style=_ref2$style===void 0?{}:_ref2$style,_ref2$textStyle=_ref2.textStyle,textStyle=_ref2$textStyle===void 0?{}:_ref2$textStyle,_ref2$colorFormat=_ref2.colorFormat,colorFormat=_ref2$colorFormat===void 0?'hex':_ref2$colorFormat,_ref2$hideInitialColo=_ref2.hideInitialColor,hideInitialColor=_ref2$hideInitialColo===void 0?false:_ref2$hideInitialColo,_ref2$hideText=_ref2.hideText,hideText=_ref2$hideText===void 0?false:_ref2$hideText;var _useContext=(0,_react.useContext)(_GlobalStyles.CTX),returnedResults=_useContext.returnedResults,value=_useContext.value,previewColorStyle=_useContext.previewColorStyle,colorHash=_useContext.colorHash,invertedColor=_useContext.invertedColor;var justifyContent=(_getStyle=(0,_GlobalStyles.getStyle)(style,'justifyContent'))!=null?_getStyle:'center';var initialColorText=(0,_react.useMemo)(function(){var _COLOR_HSVA=(0,_ColorsConversionFormulas.COLOR_HSVA)(value),h=_COLOR_HSVA.h,s=_COLOR_HSVA.s,b=_COLOR_HSVA.b,a=_COLOR_HSVA.a;var formated=returnedResults({h:h,s:s,b:b,a:a})[colorFormat];var contrast=(0,_ColorsConversionFormulas.CONTRAST_RATIO)({h:h,s:s,b:b},'#fff');var color=contrast<CONTRAST_RATIO_MIN?'#000':'#fff';return{formated:formated,color:color};},[value,colorFormat]);var updateText=function updateText(){return returnedResults()[colorFormat];};var invertedColorStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _f=function _f(){return{color:invertedColor.value};};_f._closure={invertedColor:invertedColor};_f.asString="function _f(){const{invertedColor}=jsThis._closure;{return{color:invertedColor.value};}}";_f.__workletHash=11809239207666;_f.__location="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Preview.js (29:48)";_f.__optimalization=3;return _f;}());return _react.default.createElement(_reactNative.View,{style:[styles.previewWrapper,style],__self:this,__source:{fileName:_jsxFileName,lineNumber:30,columnNumber:13}},!hideInitialColor&&_react.default.createElement(_reactNative.View,{style:[styles.previewContainer,{backgroundColor:value,justifyContent:justifyContent}],__self:this,__source:{fileName:_jsxFileName,lineNumber:31,columnNumber:30}},!hideText&&_react.default.createElement(_reactNative.Text,{style:[{color:initialColorText.color},styles.previewText,textStyle],__self:this,__source:{fileName:_jsxFileName,lineNumber:32,columnNumber:26}},initialColorText.formated)),_react.default.createElement(_reactNativeReanimated.default.View,{style:[styles.previewContainer,{justifyContent:justifyContent},previewColorStyle],__self:this,__source:{fileName:_jsxFileName,lineNumber:34,columnNumber:7}},!hideText&&_react.default.createElement(ReText,{text:updateText,hash:colorHash,style:[textStyle,invertedColorStyle],__self:this,__source:{fileName:_jsxFileName,lineNumber:35,columnNumber:23}})));}var styles=_reactNative.StyleSheet.create({previewWrapper:{flexDirection:'row',height:25,borderRadius:5,overflow:'hidden'},previewContainer:{flex:1,justifyContent:'center'},previewText:{fontWeight:'bold',textAlign:'center'}});