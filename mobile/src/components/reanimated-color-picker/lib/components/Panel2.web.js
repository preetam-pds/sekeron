var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.Panel2=Panel2;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeGestureHandler=require("react-native-gesture-handler");var _reactNativeReanimated=_interopRequireWildcard(require("react-native-reanimated"));var _GlobalStyles=_interopRequireWildcard(require("../GlobalStyles"));var _Thumbs=_interopRequireDefault(require("./Thumbs"));var _jsxFileName="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Panel2.js";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function Panel2(_ref){var _getStyle;var thumbShape=_ref.thumbShape,thumbSize=_ref.thumbSize,thumbColor=_ref.thumbColor,_ref$style=_ref.style,style=_ref$style===void 0?{}:_ref$style,_ref$reverse=_ref.reverse,reverse=_ref$reverse===void 0?false:_ref$reverse;var _useContext=(0,_react.useContext)(_GlobalStyles.CTX),registerHandle=_useContext.registerHandle,solidColor=_useContext.solidColor,onGestureEventFinish=_useContext.onGestureEventFinish,updateHue=_useContext.updateHue,updateSaturation=_useContext.updateSaturation,thumbsSize=_useContext.thumbSize;var thumb_Size=thumbSize!=null?thumbSize:thumbsSize;var borderRadius=(_getStyle=(0,_GlobalStyles.getStyle)(style,'borderRadius'))!=null?_getStyle:5;var idX=(0,_react.useRef)('panel2'+Math.random()).current;var idY=(0,_react.useRef)('panel2'+Math.random()).current;var _useState=(0,_react.useState)(0),_useState2=(0,_slicedToArray2.default)(_useState,2),width=_useState2[0],setWidth=_useState2[1];var _useState3=(0,_react.useState)(0),_useState4=(0,_slicedToArray2.default)(_useState3,2),height=_useState4[0],setHeight=_useState4[1];var handlePosX=(0,_reactNativeReanimated.useSharedValue)(0);var handlePosY=(0,_reactNativeReanimated.useSharedValue)(0);var handleScale=(0,_reactNativeReanimated.useSharedValue)(1);(0,_react.useEffect)(function(){registerHandle({id:idX,channel:'h',axis:'x',width:width,height:height,thumbSize:thumb_Size,isReversed:reverse,handle:handlePosX});registerHandle({id:idY,channel:'s',axis:'y',width:width,height:height,thumbSize:thumb_Size,isReversed:true,handle:handlePosY});},[height,width,thumbSize,reverse]);var handleStyle=(0,_reactNativeReanimated.useAnimatedStyle)(function(){var _f=function _f(){return{transform:[{translateX:handlePosX.value},{translateY:handlePosY.value},{scale:handleScale.value}]};};_f._closure={handlePosX:handlePosX,handlePosY:handlePosY,handleScale:handleScale};_f.asString="function _f(){const{handlePosX,handlePosY,handleScale}=jsThis._closure;{return{transform:[{translateX:handlePosX.value},{translateY:handlePosY.value},{scale:handleScale.value}]};}}";_f.__workletHash=9517779209984;_f.__location="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Panel2.js (40:41)";_f.__optimalization=3;return _f;}());var updateHS=function updateHS(hue,saturation){updateHue(hue);updateSaturation(saturation);};var gestureEvent=(0,_reactNativeReanimated.useAnimatedGestureHandler)({onStart:function(){var _f=function _f(event,ctx){ctx.x=event.x;ctx.y=event.y;handleScale.value=(0,_reactNativeReanimated.withTiming)(1.2,{duration:100});};_f._closure={handleScale:handleScale,withTiming:_reactNativeReanimated.withTiming};_f.asString="function _f(event,ctx){const{handleScale,withTiming}=jsThis._closure;{ctx.x=event.x;ctx.y=event.y;handleScale.value=withTiming(1.2,{duration:100});}}";_f.__workletHash=16915922246164;_f.__location="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Panel2.js (48:17)";return _f;}(),onActive:function(){var _f=function _f(event,ctx){var clamp=function clamp(v,max){return Math.min(Math.max(v,0),max);};var x=event.translationX;var y=event.translationY;var posX=clamp(x+ctx.x,width);var posY=clamp(y+ctx.y,height);var percentX=posX/width;var percentY=posY/height;var hueX=reverse?360-Math.round(percentX*360):Math.round(percentX*360);var saturationY=Math.round(100-percentY*100);(0,_reactNativeReanimated.runOnJS)(updateHS)(hueX,saturationY);};_f._closure={width:width,height:height,reverse:reverse,runOnJS:_reactNativeReanimated.runOnJS,updateHS:updateHS};_f.asString="function _f(event,ctx){const{width,height,reverse,runOnJS,updateHS}=jsThis._closure;{const clamp=function(v,max){return Math.min(Math.max(v,0),max);};const x=event.translationX;const y=event.translationY;const posX=clamp(x+ctx.x,width);const posY=clamp(y+ctx.y,height);const percentX=posX/width;const percentY=posY/height;const hueX=reverse?360-Math.round(percentX*360):Math.round(percentX*360);const saturationY=Math.round(100-percentY*100);runOnJS(updateHS)(hueX,saturationY);}}";_f.__workletHash=16427337851108;_f.__location="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Panel2.js (53:18)";return _f;}(),onFinish:function(){var _f=function _f(){handleScale.value=(0,_reactNativeReanimated.withTiming)(1,{duration:100});(0,_reactNativeReanimated.runOnJS)(onGestureEventFinish)();};_f._closure={handleScale:handleScale,withTiming:_reactNativeReanimated.withTiming,runOnJS:_reactNativeReanimated.runOnJS,onGestureEventFinish:onGestureEventFinish};_f.asString="function _f(){const{handleScale,withTiming,runOnJS,onGestureEventFinish}=jsThis._closure;{handleScale.value=withTiming(1,{duration:100});runOnJS(onGestureEventFinish)();}}";_f.__workletHash=2392148412572;_f.__location="D:\\Development\\--- Packages ---\\reanimated-color-picker\\lib\\components\\Panel2.js (65:18)";return _f;}()},[height,width,reverse]);var onLayout=(0,_react.useCallback)(function(_ref2){var layout=_ref2.nativeEvent.layout;setWidth(Math.round(layout.width));setHeight(Math.round(layout.height));},[]);return _react.default.createElement(_reactNativeGestureHandler.PanGestureHandler,{onGestureEvent:gestureEvent,minDist:0,__self:this,__source:{fileName:_jsxFileName,lineNumber:74,columnNumber:13}},_react.default.createElement(_reactNativeReanimated.default.View,{onLayout:onLayout,style:[_GlobalStyles.default.panel_container,{height:width},style,{position:'relative',borderWidth:0,padding:0}],__self:this,__source:{fileName:_jsxFileName,lineNumber:75,columnNumber:7}},_react.default.createElement(_reactNative.ImageBackground,{source:require('../assets/Panel2.png'),style:[_GlobalStyles.default.panel_image,{borderRadius:borderRadius}],resizeMode:"stretch",__self:this,__source:{fileName:_jsxFileName,lineNumber:76,columnNumber:9}}),_react.default.createElement(_Thumbs.default,{channel:'s',thumbShape:thumbShape,thumbSize:thumb_Size,thumbColor:thumbColor,handleStyle:handleStyle,solidColor:solidColor,__self:this,__source:{fileName:_jsxFileName,lineNumber:77,columnNumber:9}})));}